<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header class="navbar">
    <div class="logo">
        <img src="images/logo.png">
    </div>

    <button class="menu-toggle" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
</button>


    <ul class="nav-links">
        <li><a href="#">Home</a></li>
        <li><a href="programs.html">Programs</a></li>
        <li><a href="trainers_profile.html">Trainers</a></li>
        <li><a href="membership.html">Membership</a></li>
        <li><a href="sucess_stories.html">Success Stories</a></li>
        <li><a href="contact.html">Contact</a></li>
    </ul>

    <!-- ‚úÖ AUTH AREA -->
    <div id="auth-area">
        <a href="login.html" class="login-btn">Login</a>
    </div>
</header>


    <!-- Header Section -->
    <div class="header">CONTACT US</div>

    <!-- Contact Section -->
    <div class="contact-container">

        <!-- Contact Information -->
        <div class="contact-info">
            <h2>Reach Us</h2>

            <div class="contact-item">
                <span>üìç Address:</span><br>
                Almis Fitness Center,<br>
                1 Floor, 7-3, Madley Rd, T. Nagar, Chennai, Tamil Nadu 600017
            </div>

            <div class="contact-item">
                <span>üìû Phone:</span><br>
                +91 98765 43210
            </div>

            <div class="contact-item">
                <span>üìß Email:</span><br>
                almifitness79@gmail.com
            </div>
        </div>

        <!-- Contact Form -->
        <div class="contact-form">
            <h2>Send a Message</h2>

            <!-- ‚ùå no action, no submit -->
            <form onsubmit="sendMessage(event)">
                <input type="text" id="name" placeholder="Your Name" required>
                <input type="email" id="email" placeholder="Your Email" required>
                <input type="text" id="subject" placeholder="Subject" required>
                <textarea id="message" placeholder="Your Message..." required></textarea>

                <button type="submit" class="btn">Send Message</button>
            </form>
        </div>

    </div>

<script>
function sendMessage(event) {
    event.preventDefault();

    fetch("http://localhost:8081/api/contact", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            subject: document.getElementById("subject").value,
            message: document.getElementById("message").value
        })
    })
    .then(res => {
        console.log("STATUS:", res.status);   // üî• DEBUG 1
        return res.json();                   // üî• DEBUG 2
    })
    .then(data => {
        console.log("RESPONSE:", data);       // üî• DEBUG 3

        if (data.success) {
            showToast(data.message || "Message sent successfully", true);

            // Clear form
            document.getElementById("name").value = "";
            document.getElementById("email").value = "";
            document.getElementById("subject").value = "";
            document.getElementById("message").value = "";
        } else {
            showToast(data.message || "Failed to send message", false);
        }
    })
    .catch(err => {
        console.error("FETCH ERROR:", err);   // üî• DEBUG 4
        showToast("Error sending message", false);
    });
}
</script>



<script>
(function () {
    const authArea = document.getElementById("auth-area");
    if (!authArea) return;

    const user = localStorage.getItem("loggedInUser");

    if (user) {
        authArea.innerHTML = `
            <span style="color:white; font-weight:bold; margin-right:8px;">
                Hi, ${user}
            </span>
            <button class="login-btn" onclick="logoutUser()">Logout</button>
        `;
    }
})();

function logoutUser() {
    localStorage.removeItem("loggedInUser");
    window.location.href = "home.html";
}
</script>
<!-- COMMON POPUP -->
<div id="commonModal" class="modal">
  <div class="modal-box">
    <span class="modal-close" onclick="closeModal()">√ó</span>

    <h2 id="modalTitle">Join Now</h2>
    <p id="modalDesc">Fill the details below</p>

    <input type="text" id="modalName" placeholder="Your Name">
    <input type="email" id="modalEmail" placeholder="Your Email">
    <input type="hidden" id="selectedPlan">

    <button class="btn-red" onclick="submitModal()">Submit</button>
  </div>
</div>
<script>
function openModal(title, desc) {
    document.getElementById("modalTitle").innerText = title;
    document.getElementById("modalDesc").innerText = desc;

    // üî• AUTO-FILL EMAIL IF LOGGED IN
    const user = localStorage.getItem("loggedInUser");
    if (user) {
        document.getElementById("modalEmail").value = user;
    } else {
        document.getElementById("modalEmail").value = "";
    }

    document.getElementById("commonModal").style.display = "flex";
}


function closeModal() {
    document.getElementById("commonModal").style.display = "none";
}

function submitModal() {
    showToast("Request submitted successfully!");
    closeModal();
}
</script>

<!-- TOAST -->
<div id="toast" class="toast"></div>

<script>
function showToast(message, success = true) {
    const toast = document.getElementById("toast");

    toast.innerText = message;
    toast.className = "toast show " + (success ? "success" : "error");

    setTimeout(() => {
        toast.className = "toast";
    }, 3000);
}
</script>

<!-- TOGGLE LOGIC -->
 <script>
function toggleMenu() {
    const nav = document.querySelector(".nav-links");
    const toggle = document.querySelector(".menu-toggle");

    nav.classList.toggle("active");
    toggle.classList.toggle("active");
}
</script>

</body>
</html>
